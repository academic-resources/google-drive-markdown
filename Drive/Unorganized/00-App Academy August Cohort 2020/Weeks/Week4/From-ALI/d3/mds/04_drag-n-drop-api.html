<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>04_drag-n-drop-api</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h1 id="event-handling-html-drag-and-drop-api">Event Handling: HTML Drag-And-Drop API</h1>
<p>Dragging and dropping a page element is a fun and convenient way for users to interact with a Web page! HTML drag-and-drop interfaces are most commonly used for dragging files, such as PDFs or images, onto a page in a specified area known as a <em>drop zone</em>.</p>
<p>While less typical than button clicks and form submission events, HTML drag-and-drop is relevant to event handling because it uses the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Event">DOM event model</a> and <a href="https://developer.mozilla.org/en-US/docs/Web/API/DragEvent">drag events</a> inherited from <a href="https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent">mouse events</a>.</p>
<p>This reading will go over how to use the <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTML_Drag_and_Drop_API">HTML Drag and Drop API</a> to create “draggable” page elements and allow users to drop them into a drop zone.</p>
<h2 id="basic-drag-and-drop-functions">Basic drag-and-drop functions</h2>
<p>Let’s go over how to set up basic drag-and-drop functionality, according to the <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTML_Drag_and_Drop_API">MDN documentation</a>. You’ll need to mark an element as “draggable”. Then, to do something with that dragging, you need</p>
<ul>
<li>A <em>dragstart</em> handler – occurs when the user clicks the mouse and starts dragging</li>
<li>A <em>drop</em> handler – occurs when the user releases the mouse click and “drops” the element</li>
</ul>
<p>You will also see how to use the <code>dragenter</code> and <code>dragleave</code> events to do some nice interactions.</p>
<h2 id="the-example">The example</h2>
<p>Here’s an HTML document that you can copy and paste into a text editor if you want to follow along.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb1-1" title="1"></a>
<a class="sourceLine" id="cb1-2" title="2"><span class="dt">&lt;!DOCTYPE </span>html<span class="dt">&gt;</span></a>
<a class="sourceLine" id="cb1-3" title="3"><span class="kw">&lt;html</span><span class="ot"> lang=</span><span class="st">&quot;en&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb1-4" title="4"><span class="kw">&lt;head&gt;</span></a>
<a class="sourceLine" id="cb1-5" title="5">  <span class="kw">&lt;meta</span><span class="ot"> charset=</span><span class="st">&quot;UTF-8&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb1-6" title="6">  <span class="kw">&lt;meta</span><span class="ot"> name=</span><span class="st">&quot;viewport&quot;</span><span class="ot"> content=</span><span class="st">&quot;width=device-width, initial-scale=1.0&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb1-7" title="7">  <span class="kw">&lt;title&gt;</span>Red Square is a Drag<span class="kw">&lt;/title&gt;</span></a>
<a class="sourceLine" id="cb1-8" title="8">  <span class="kw">&lt;style&gt;</span></a>
<a class="sourceLine" id="cb1-9" title="9">    <span class="pp">#red-square</span> {</a>
<a class="sourceLine" id="cb1-10" title="10">      <span class="kw">background-color</span>: <span class="cn">red</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-11" title="11">      <span class="kw">box-sizing</span>: <span class="dv">border-box</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-12" title="12">      <span class="kw">height</span>: <span class="dv">100</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-13" title="13">      <span class="kw">width</span>: <span class="dv">100</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-14" title="14">    }</a>
<a class="sourceLine" id="cb1-15" title="15">  <span class="kw">&lt;/style&gt;</span></a>
<a class="sourceLine" id="cb1-16" title="16"><span class="kw">&lt;/head&gt;</span></a>
<a class="sourceLine" id="cb1-17" title="17"><span class="kw">&lt;body&gt;</span></a>
<a class="sourceLine" id="cb1-18" title="18">  <span class="kw">&lt;div</span><span class="ot"> id=</span><span class="st">&quot;red-square&quot;</span><span class="kw">&gt;&lt;/div&gt;</span></a>
<a class="sourceLine" id="cb1-19" title="19"><span class="kw">&lt;/body&gt;</span></a>
<a class="sourceLine" id="cb1-20" title="20"><span class="kw">&lt;/html&gt;</span></a></code></pre></div>
<p>You don’t need to know what <code>box-sizing</code> does. That’ll be covered in future lessons. It’s in this example to make sure the box looks ok when it’s dragged.</p>
<h2 id="the-first-step-of-drag-and-drop">The first step of drag and drop</h2>
<p>The first step to making an element draggable is to add that attribute to the element itself. Change the red square <code>div</code> to have the <code>draggable</code> attribute with a value of “true”.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb2-1" title="1">  <span class="kw">&lt;div</span><span class="ot"> id=</span><span class="st">&quot;red-square&quot;</span><span class="ot"> draggable=</span><span class="st">&quot;true&quot;</span><span class="kw">&gt;&lt;/div&gt;</span></a></code></pre></div>
<p>Now, if you refresh your page, you can start dragging the red square. When you release it, it will “snap” back to it’s original position.</p>
<figure>
<img src="https://assets.aaonline.io/Module-DOM-API/event-handling/assets/drag-red-square-1.gif" alt="draggable red square" /><figcaption>draggable red square</figcaption>
</figure>
<h3 id="handling-the-start-of-a-drag">Handling the start of a drag</h3>
<p>Now that the element is draggable, you need some JavaScript to handle the event of when someone starts dragging an element. This is there so that your code knows what’s being dragged! Otherwise, how will it know what to do when the dragging ends?</p>
<p>The following code creates a handler for the <code>dragstart</code> event. Then, it subscribes to the red square’s <code>dragstart</code> event with that event handler. The event handler, in this case, will add a class to the red square to make it show that it’s being dragged. Then, it adds the value of the <code>id</code> of the element to the “data transfer” object. The “data transfer” object holds all of the information that will be needed when the dragging operation ends.</p>
<p>The <code>classList</code> object for the HTML element is just a way to add and remove CSS classes to and from a DOM object. You’re not going to be tested over that bit of information for some weeks, so don’t worry about remembering it. Just understand that using the <code>add</code> method on it <em>adds</em> the CSS class to the HTML element.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb3-1" title="1"><span class="dt">&lt;!DOCTYPE </span>html<span class="dt">&gt;</span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="kw">&lt;html</span><span class="ot"> lang=</span><span class="st">&quot;en&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb3-3" title="3"><span class="kw">&lt;head&gt;</span></a>
<a class="sourceLine" id="cb3-4" title="4">  <span class="kw">&lt;meta</span><span class="ot"> charset=</span><span class="st">&quot;UTF-8&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb3-5" title="5">  <span class="kw">&lt;meta</span><span class="ot"> name=</span><span class="st">&quot;viewport&quot;</span><span class="ot"> content=</span><span class="st">&quot;width=device-width, initial-scale=1.0&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb3-6" title="6">  <span class="kw">&lt;title&gt;</span>Red Square is a Drag<span class="kw">&lt;/title&gt;</span></a>
<a class="sourceLine" id="cb3-7" title="7">  <span class="kw">&lt;script</span><span class="ot"> type=</span><span class="st">&quot;text/javascript&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb3-8" title="8">    <span class="kw">const</span> handleDragStart <span class="op">=</span> e <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb3-9" title="9">      <span class="va">e</span>.<span class="va">target</span>.<span class="va">classList</span>.<span class="at">add</span>(<span class="st">&#39;is-being-dragged&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-10" title="10">      <span class="va">e</span>.<span class="va">dataTransfer</span>.<span class="at">setData</span>(<span class="st">&#39;text/plain&#39;</span><span class="op">,</span> <span class="va">e</span>.<span class="va">target</span>.<span class="at">id</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-11" title="11">      <span class="va">e</span>.<span class="va">dataTransfer</span>.<span class="at">dropEffect</span> <span class="op">=</span> <span class="st">&#39;move&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb3-12" title="12">    <span class="op">}</span></a>
<a class="sourceLine" id="cb3-13" title="13">    <span class="va">window</span>.<span class="at">addEventListener</span>(<span class="st">&#39;DOMContentLoaded&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb3-14" title="14">      document</a>
<a class="sourceLine" id="cb3-15" title="15">        .<span class="at">getElementById</span>(<span class="st">&#39;red-square&#39;</span>)</a>
<a class="sourceLine" id="cb3-16" title="16">        .<span class="at">addEventListener</span>(<span class="st">&#39;dragstart&#39;</span><span class="op">,</span> handleDragStart)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-17" title="17">    <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-18" title="18">  <span class="kw">&lt;/script&gt;</span></a>
<a class="sourceLine" id="cb3-19" title="19">  <span class="kw">&lt;style&gt;</span></a>
<a class="sourceLine" id="cb3-20" title="20">    <span class="pp">#red-square</span> {</a>
<a class="sourceLine" id="cb3-21" title="21">      <span class="kw">background-color</span>: <span class="cn">red</span><span class="op">;</span></a>
<a class="sourceLine" id="cb3-22" title="22">      <span class="kw">box-sizing</span>: <span class="dv">border-box</span><span class="op">;</span></a>
<a class="sourceLine" id="cb3-23" title="23">      <span class="kw">height</span>: <span class="dv">100</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="cb3-24" title="24">      <span class="kw">width</span>: <span class="dv">100</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="cb3-25" title="25">    }</a>
<a class="sourceLine" id="cb3-26" title="26"></a>
<a class="sourceLine" id="cb3-27" title="27">    <span class="fu">.is-being-dragged</span> {</a>
<a class="sourceLine" id="cb3-28" title="28">      <span class="kw">opacity</span>: <span class="dv">0.5</span><span class="op">;</span></a>
<a class="sourceLine" id="cb3-29" title="29">      <span class="kw">border</span>: <span class="dv">2</span><span class="dt">px</span> <span class="dv">dashed</span> <span class="cn">white</span><span class="op">;</span></a>
<a class="sourceLine" id="cb3-30" title="30">    }</a>
<a class="sourceLine" id="cb3-31" title="31">  <span class="kw">&lt;/style&gt;</span></a>
<a class="sourceLine" id="cb3-32" title="32"><span class="kw">&lt;/head&gt;</span></a>
<a class="sourceLine" id="cb3-33" title="33"><span class="kw">&lt;body&gt;</span></a>
<a class="sourceLine" id="cb3-34" title="34">  <span class="kw">&lt;div</span><span class="ot"> id=</span><span class="st">&quot;red-square&quot;</span><span class="kw">&gt;&lt;/div&gt;</span></a>
<a class="sourceLine" id="cb3-35" title="35"><span class="kw">&lt;/body&gt;</span></a>
<a class="sourceLine" id="cb3-36" title="36"><span class="kw">&lt;/html&gt;</span></a></code></pre></div>
<p>If you update your version of the code, you can now see that the square’s border gets all dashy when you drag it!</p>
<figure>
<img src="https://assets.aaonline.io/Module-DOM-API/event-handling/assets/drag-red-square-2.gif" alt="draggable red square with dashed border" /><figcaption>draggable red square with dashed border</figcaption>
</figure>
<h3 id="the-drop-zone-is-all-clear">The drop zone is all clear!</h3>
<p>A drop zone is just another HTML element. Put another <code>div</code> in your HTML and give it an id of <code>drop-zone</code>. It could, conceivably, look like this.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb4-1" title="1"><span class="kw">&lt;body&gt;</span></a>
<a class="sourceLine" id="cb4-2" title="2">  <span class="kw">&lt;div</span><span class="ot"> id=</span><span class="st">&quot;red-square&quot;</span><span class="kw">&gt;&lt;/div&gt;</span></a>
<a class="sourceLine" id="cb4-3" title="3">  <span class="kw">&lt;div</span><span class="ot"> id=</span><span class="st">&quot;drop-zone&quot;</span><span class="kw">&gt;</span>drop zone<span class="kw">&lt;/div&gt;</span></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="kw">&lt;/body&gt;</span></a></code></pre></div>
<p>To make it visible, add some CSS. Note that most of that in there is to make it look pretty. You should understand the simple things like “background-color” and “color” and “font-size”, “height” and “width”. You won’t yet be tested on any of those other properties. But, feel free to play around with them!</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">&lt;style&gt;</span></a>
<a class="sourceLine" id="cb5-2" title="2">  <span class="pp">#drop-zone</span> {</a>
<a class="sourceLine" id="cb5-3" title="3">    <span class="kw">align-items</span>: <span class="dv">center</span><span class="op">;</span></a>
<a class="sourceLine" id="cb5-4" title="4">    <span class="kw">border</span>: <span class="dv">1</span><span class="dt">px</span> <span class="dv">solid</span> <span class="cn">#DDD</span><span class="op">;</span></a>
<a class="sourceLine" id="cb5-5" title="5">    <span class="kw">color</span>: <span class="cn">#CCC</span><span class="op">;</span></a>
<a class="sourceLine" id="cb5-6" title="6">    <span class="kw">display</span>: flex<span class="op">;</span></a>
<a class="sourceLine" id="cb5-7" title="7">    <span class="kw">font-family</span>: Arial<span class="op">,</span> Helvetica<span class="op">,</span> <span class="dv">sans-serif</span><span class="op">;</span></a>
<a class="sourceLine" id="cb5-8" title="8">    <span class="kw">font-size</span>: <span class="dv">2</span><span class="dt">em</span><span class="op">;</span></a>
<a class="sourceLine" id="cb5-9" title="9">    <span class="kw">font-weight</span>: <span class="dv">bold</span><span class="op">;</span></a>
<a class="sourceLine" id="cb5-10" title="10">    <span class="kw">height</span>: <span class="dv">200</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="cb5-11" title="11">    <span class="kw">justify-content</span>: <span class="dv">center</span><span class="op">;</span></a>
<a class="sourceLine" id="cb5-12" title="12">    <span class="kw">position</span>: <span class="dv">absolute</span><span class="op">;</span></a>
<a class="sourceLine" id="cb5-13" title="13">    <span class="kw">right</span>: <span class="dv">0</span><span class="op">;</span></a>
<a class="sourceLine" id="cb5-14" title="14">    <span class="kw">width</span>: <span class="dv">200</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="cb5-15" title="15">  }</a>
<a class="sourceLine" id="cb5-16" title="16"></a>
<a class="sourceLine" id="cb5-17" title="17">  <span class="pp">#red-square</span> {</a>
<a class="sourceLine" id="cb5-18" title="18">    <span class="kw">background-color</span>: <span class="cn">red</span><span class="op">;</span></a>
<a class="sourceLine" id="cb5-19" title="19">    <span class="kw">box-sizing</span>: <span class="dv">border-box</span><span class="op">;</span></a>
<a class="sourceLine" id="cb5-20" title="20">    <span class="kw">height</span>: <span class="dv">100</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="cb5-21" title="21">    <span class="kw">width</span>: <span class="dv">100</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="cb5-22" title="22">  }</a>
<a class="sourceLine" id="cb5-23" title="23"></a>
<a class="sourceLine" id="cb5-24" title="24">  <span class="fu">.is-being-dragged</span> {</a>
<a class="sourceLine" id="cb5-25" title="25">    <span class="kw">opacity</span>: <span class="dv">0.5</span><span class="op">;</span></a>
<a class="sourceLine" id="cb5-26" title="26">    <span class="kw">border</span>: <span class="dv">2</span><span class="dt">px</span> <span class="dv">dashed</span> <span class="cn">white</span><span class="op">;</span></a>
<a class="sourceLine" id="cb5-27" title="27">  }</a>
<a class="sourceLine" id="cb5-28" title="28"><span class="kw">&lt;/style&gt;</span></a></code></pre></div>
<figure>
<img src="https://assets.aaonline.io/Module-DOM-API/event-handling/assets/drag-red-square-3.1.png" alt="draggable red square with dashed border and drop zone" /><figcaption>draggable red square with dashed border and drop zone</figcaption>
</figure>
<h3 id="handle-when-the-red-square-gets-enters-the-drop-zone-and-leaves">Handle when the red square gets enters the drop zone (and leaves)</h3>
<p>This is another couple of JavaScript event handlers, but this time, it will handle the <code>dragenter</code> and <code>dragleave</code> events on the drop zone element. You can replace the <code>&lt;script&gt;</code> tag in your HTML with this version, here, to handle those events. Note that the <code>handleDragEnter</code> event handler merely adds a CSS class to the drop zone. The <code>handleDragLeave</code> removes the CSS class. Then, in the <code>DOMContentLoaded</code> event handler, the last three lines gets a reference to the drop zone element and attaches the event handlers to it.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb6-1" title="1"><span class="kw">&lt;script</span><span class="ot"> type=</span><span class="st">&quot;text/javascript&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb6-2" title="2">  <span class="kw">const</span> handleDragStart <span class="op">=</span> e <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb6-3" title="3">    <span class="va">e</span>.<span class="va">target</span>.<span class="va">classList</span>.<span class="at">add</span>(<span class="st">&#39;is-being-dragged&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-4" title="4">    <span class="va">e</span>.<span class="va">dataTransfer</span>.<span class="at">setData</span>(<span class="st">&#39;text/plain&#39;</span><span class="op">,</span> <span class="va">e</span>.<span class="va">target</span>.<span class="at">id</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-5" title="5">    <span class="va">e</span>.<span class="va">dataTransfer</span>.<span class="at">dropEffect</span> <span class="op">=</span> <span class="st">&#39;move&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb6-6" title="6">  <span class="op">};</span></a>
<a class="sourceLine" id="cb6-7" title="7"></a>
<a class="sourceLine" id="cb6-8" title="8">  <span class="kw">const</span> handleDragEnter <span class="op">=</span> e <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb6-9" title="9">    <span class="va">e</span>.<span class="va">target</span>.<span class="va">classList</span>.<span class="at">add</span>(<span class="st">&#39;is-active-drop-zone&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-10" title="10">  <span class="op">};</span></a>
<a class="sourceLine" id="cb6-11" title="11"></a>
<a class="sourceLine" id="cb6-12" title="12">  <span class="kw">const</span> handleDragLeave <span class="op">=</span> e <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb6-13" title="13">    <span class="va">e</span>.<span class="va">target</span>.<span class="va">classList</span>.<span class="at">remove</span>(<span class="st">&#39;is-active-drop-zone&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-14" title="14">  <span class="op">};</span></a>
<a class="sourceLine" id="cb6-15" title="15"></a>
<a class="sourceLine" id="cb6-16" title="16">  <span class="va">window</span>.<span class="at">addEventListener</span>(<span class="st">&#39;DOMContentLoaded&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb6-17" title="17">    document</a>
<a class="sourceLine" id="cb6-18" title="18">      .<span class="at">getElementById</span>(<span class="st">&#39;red-square&#39;</span>)</a>
<a class="sourceLine" id="cb6-19" title="19">      .<span class="at">addEventListener</span>(<span class="st">&#39;dragstart&#39;</span><span class="op">,</span> handleDragStart)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-20" title="20"></a>
<a class="sourceLine" id="cb6-21" title="21">    <span class="kw">const</span> dropZone <span class="op">=</span> <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&#39;drop-zone&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-22" title="22">    <span class="va">dropZone</span>.<span class="at">addEventListener</span>(<span class="st">&#39;dragenter&#39;</span><span class="op">,</span> handleDragEnter)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-23" title="23">    <span class="va">dropZone</span>.<span class="at">addEventListener</span>(<span class="st">&#39;dragleave&#39;</span><span class="op">,</span> handleDragLeave)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-24" title="24">  <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-25" title="25"><span class="kw">&lt;/script&gt;</span></a></code></pre></div>
<p>The CSS to make the item change looks like this. Just add the class to the <code>&lt;style&gt;</code> tag in the HTML.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode css"><code class="sourceCode css"><a class="sourceLine" id="cb7-1" title="1"><span class="fu">.is-active-drop-zone</span> {</a>
<a class="sourceLine" id="cb7-2" title="2">  <span class="kw">background-color</span>: <span class="cn">blue</span><span class="op">;</span></a>
<a class="sourceLine" id="cb7-3" title="3">}</a></code></pre></div>
<p>Just look at that drop zone turn blue with glee!</p>
<figure>
<img src="https://assets.aaonline.io/Module-DOM-API/event-handling/assets/drag-red-square-4.gif" alt="draggable red square with dashed border and active drop zone" /><figcaption>draggable red square with dashed border and active drop zone</figcaption>
</figure>
<h3 id="do-something-with-a-drop">Do something with a “drop”!</h3>
<p>Finally, the <code>drop</code> event of the drop target handles what happens when you let go of the draggable element over the drop zone. However, there’s one small problem. From the MDN documentation on <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTML_Drag_and_Drop_API/Drag_operations#drop">Drag Operations</a>:</p>
<blockquote>
<p>If the mouse is released over an element that is a valid drop target, that is, one that cancelled the last <code>dragenter</code> or <code>dragover</code> event, then the drop will be successful, and a drop event will fire at the target. Otherwise, the drag operation is cancelled, and no drop event is fired.</p>
</blockquote>
<p>For this to work properly, you will <em>also</em> have to subscribe to the <code>drop</code> event for the drop zone. Then, in both the handlers for the <code>drop</code> and <code>dragenter</code> events, you’ll need to cancel the event. Recall that in the last article you learned about the <code>preventDefault()</code> method on the event object. That’s what you need to call in both the <code>drop</code> and <code>dragenter</code> event handlers to make the <code>drop</code> event fire.</p>
<p>That’s a lot of words! Here is the final HTML for this little dragging example.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb8-1" title="1"><span class="dt">&lt;!DOCTYPE </span>html<span class="dt">&gt;</span></a>
<a class="sourceLine" id="cb8-2" title="2"><span class="kw">&lt;html</span><span class="ot"> lang=</span><span class="st">&quot;en&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb8-3" title="3"><span class="kw">&lt;head&gt;</span></a>
<a class="sourceLine" id="cb8-4" title="4">  <span class="kw">&lt;meta</span><span class="ot"> charset=</span><span class="st">&quot;UTF-8&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb8-5" title="5">  <span class="kw">&lt;meta</span><span class="ot"> name=</span><span class="st">&quot;viewport&quot;</span><span class="ot"> content=</span><span class="st">&quot;width=device-width, initial-scale=1.0&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb8-6" title="6">  <span class="kw">&lt;title&gt;</span>Red Square is a Drag<span class="kw">&lt;/title&gt;</span></a>
<a class="sourceLine" id="cb8-7" title="7">  <span class="kw">&lt;script</span><span class="ot"> type=</span><span class="st">&quot;text/javascript&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb8-8" title="8">    <span class="kw">const</span> handleDragStart <span class="op">=</span> e <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb8-9" title="9">      <span class="va">e</span>.<span class="va">target</span>.<span class="va">classList</span>.<span class="at">add</span>(<span class="st">&#39;is-being-dragged&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-10" title="10">      <span class="va">e</span>.<span class="va">dataTransfer</span>.<span class="at">setData</span>(<span class="st">&#39;text/plain&#39;</span><span class="op">,</span> <span class="va">e</span>.<span class="va">target</span>.<span class="at">id</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-11" title="11">      <span class="va">e</span>.<span class="va">dataTransfer</span>.<span class="at">dropEffect</span> <span class="op">=</span> <span class="st">&#39;move&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb8-12" title="12">    <span class="op">};</span></a>
<a class="sourceLine" id="cb8-13" title="13"></a>
<a class="sourceLine" id="cb8-14" title="14">    <span class="kw">const</span> handleDragEnter <span class="op">=</span> e <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb8-15" title="15">      <span class="co">// Needed so that the &quot;drop&quot; event will fire.</span></a>
<a class="sourceLine" id="cb8-16" title="16">      <span class="va">e</span>.<span class="at">preventDefault</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb8-17" title="17">      <span class="va">e</span>.<span class="va">target</span>.<span class="va">classList</span>.<span class="at">add</span>(<span class="st">&#39;is-active-drop-zone&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-18" title="18">    <span class="op">};</span></a>
<a class="sourceLine" id="cb8-19" title="19"></a>
<a class="sourceLine" id="cb8-20" title="20">    <span class="kw">const</span> handleDragLeave <span class="op">=</span> e <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb8-21" title="21">      <span class="va">e</span>.<span class="va">target</span>.<span class="va">classList</span>.<span class="at">remove</span>(<span class="st">&#39;is-active-drop-zone&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-22" title="22">    <span class="op">};</span></a>
<a class="sourceLine" id="cb8-23" title="23"></a>
<a class="sourceLine" id="cb8-24" title="24">    <span class="kw">const</span> handleDragOver <span class="op">=</span> e <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb8-25" title="25">      <span class="co">// Needed so that the &quot;drop&quot; event will fire.</span></a>
<a class="sourceLine" id="cb8-26" title="26">      <span class="va">e</span>.<span class="at">preventDefault</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb8-27" title="27">    <span class="op">};</span></a>
<a class="sourceLine" id="cb8-28" title="28"></a>
<a class="sourceLine" id="cb8-29" title="29">    <span class="kw">const</span> handleDrop <span class="op">=</span> e <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb8-30" title="30">      <span class="kw">const</span> id <span class="op">=</span> <span class="va">e</span>.<span class="va">dataTransfer</span>.<span class="at">getData</span>(<span class="st">&#39;text/plain&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-31" title="31">      <span class="kw">const</span> draggedElement <span class="op">=</span> <span class="va">document</span>.<span class="at">getElementById</span>(id)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-32" title="32">      <span class="va">draggedElement</span>.<span class="at">draggable</span> <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></a>
<a class="sourceLine" id="cb8-33" title="33">      <span class="va">e</span>.<span class="va">target</span>.<span class="at">appendChild</span>(draggedElement)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-34" title="34">    <span class="op">};</span></a>
<a class="sourceLine" id="cb8-35" title="35"></a>
<a class="sourceLine" id="cb8-36" title="36">    <span class="va">window</span>.<span class="at">addEventListener</span>(<span class="st">&#39;DOMContentLoaded&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb8-37" title="37">      document</a>
<a class="sourceLine" id="cb8-38" title="38">        .<span class="at">getElementById</span>(<span class="st">&#39;red-square&#39;</span>)</a>
<a class="sourceLine" id="cb8-39" title="39">        .<span class="at">addEventListener</span>(<span class="st">&#39;dragstart&#39;</span><span class="op">,</span> handleDragStart)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-40" title="40"></a>
<a class="sourceLine" id="cb8-41" title="41">      <span class="kw">const</span> dropZone <span class="op">=</span> <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&#39;drop-zone&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-42" title="42">      <span class="va">dropZone</span>.<span class="at">addEventListener</span>(<span class="st">&#39;drop&#39;</span><span class="op">,</span> handleDrop)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-43" title="43">      <span class="va">dropZone</span>.<span class="at">addEventListener</span>(<span class="st">&#39;dragenter&#39;</span><span class="op">,</span> handleDragEnter)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-44" title="44">      <span class="va">dropZone</span>.<span class="at">addEventListener</span>(<span class="st">&#39;dragleave&#39;</span><span class="op">,</span> handleDragLeave)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-45" title="45">      <span class="va">dropZone</span>.<span class="at">addEventListener</span>(<span class="st">&#39;dragover&#39;</span><span class="op">,</span> handleDragOver)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-46" title="46">    <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-47" title="47">  <span class="kw">&lt;/script&gt;</span></a>
<a class="sourceLine" id="cb8-48" title="48">  <span class="kw">&lt;style&gt;</span></a>
<a class="sourceLine" id="cb8-49" title="49">    <span class="pp">#drop-zone</span> {</a>
<a class="sourceLine" id="cb8-50" title="50">      <span class="kw">align-items</span>: <span class="dv">center</span><span class="op">;</span></a>
<a class="sourceLine" id="cb8-51" title="51">      <span class="kw">border</span>: <span class="dv">1</span><span class="dt">px</span> <span class="dv">solid</span> <span class="cn">#DDD</span><span class="op">;</span></a>
<a class="sourceLine" id="cb8-52" title="52">      <span class="kw">color</span>: <span class="cn">#CCC</span><span class="op">;</span></a>
<a class="sourceLine" id="cb8-53" title="53">      <span class="kw">display</span>: flex<span class="op">;</span></a>
<a class="sourceLine" id="cb8-54" title="54">      <span class="kw">font-family</span>: Arial<span class="op">,</span> Helvetica<span class="op">,</span> <span class="dv">sans-serif</span><span class="op">;</span></a>
<a class="sourceLine" id="cb8-55" title="55">      <span class="kw">font-size</span>: <span class="dv">2</span><span class="dt">em</span><span class="op">;</span></a>
<a class="sourceLine" id="cb8-56" title="56">      <span class="kw">font-weight</span>: <span class="dv">bold</span><span class="op">;</span></a>
<a class="sourceLine" id="cb8-57" title="57">      <span class="kw">height</span>: <span class="dv">200</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="cb8-58" title="58">      <span class="kw">justify-content</span>: <span class="dv">center</span><span class="op">;</span></a>
<a class="sourceLine" id="cb8-59" title="59">      <span class="kw">position</span>: <span class="dv">absolute</span><span class="op">;</span></a>
<a class="sourceLine" id="cb8-60" title="60">      <span class="kw">right</span>: <span class="dv">0</span><span class="op">;</span></a>
<a class="sourceLine" id="cb8-61" title="61">      <span class="kw">top</span>: <span class="dv">100</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="cb8-62" title="62">      <span class="kw">width</span>: <span class="dv">200</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="cb8-63" title="63">    }</a>
<a class="sourceLine" id="cb8-64" title="64"></a>
<a class="sourceLine" id="cb8-65" title="65">    <span class="pp">#red-square</span> {</a>
<a class="sourceLine" id="cb8-66" title="66">      <span class="kw">background-color</span>: <span class="cn">red</span><span class="op">;</span></a>
<a class="sourceLine" id="cb8-67" title="67">      <span class="kw">box-sizing</span>: <span class="dv">border-box</span><span class="op">;</span></a>
<a class="sourceLine" id="cb8-68" title="68">      <span class="kw">height</span>: <span class="dv">100</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="cb8-69" title="69">      <span class="kw">width</span>: <span class="dv">100</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="cb8-70" title="70">    }</a>
<a class="sourceLine" id="cb8-71" title="71"></a>
<a class="sourceLine" id="cb8-72" title="72">    <span class="fu">.is-being-dragged</span> {</a>
<a class="sourceLine" id="cb8-73" title="73">      <span class="kw">opacity</span>: <span class="dv">0.5</span><span class="op">;</span></a>
<a class="sourceLine" id="cb8-74" title="74">      <span class="kw">border</span>: <span class="dv">8</span><span class="dt">px</span> <span class="dv">dashed</span> <span class="cn">white</span><span class="op">;</span></a>
<a class="sourceLine" id="cb8-75" title="75">    }</a>
<a class="sourceLine" id="cb8-76" title="76"></a>
<a class="sourceLine" id="cb8-77" title="77">    <span class="fu">.is-active-drop-zone</span> {</a>
<a class="sourceLine" id="cb8-78" title="78">      <span class="kw">background-color</span>: <span class="cn">blue</span><span class="op">;</span></a>
<a class="sourceLine" id="cb8-79" title="79">      <span class="kw">color</span>:</a>
<a class="sourceLine" id="cb8-80" title="80">    }</a>
<a class="sourceLine" id="cb8-81" title="81">  <span class="kw">&lt;/style&gt;</span></a>
<a class="sourceLine" id="cb8-82" title="82">  <span class="kw">&lt;/style&gt;</span></a>
<a class="sourceLine" id="cb8-83" title="83"><span class="kw">&lt;/head&gt;</span></a>
<a class="sourceLine" id="cb8-84" title="84"><span class="kw">&lt;body&gt;</span></a>
<a class="sourceLine" id="cb8-85" title="85">  <span class="kw">&lt;div</span><span class="ot"> id=</span><span class="st">&quot;red-square&quot;</span><span class="ot"> draggable=</span><span class="st">&quot;true&quot;</span><span class="kw">&gt;&lt;/div&gt;</span></a>
<a class="sourceLine" id="cb8-86" title="86">  <span class="kw">&lt;div</span><span class="ot"> id=</span><span class="st">&quot;drop-zone&quot;</span><span class="kw">&gt;</span>drop zone<span class="kw">&lt;/div&gt;</span></a>
<a class="sourceLine" id="cb8-87" title="87"><span class="kw">&lt;/body&gt;</span></a>
<a class="sourceLine" id="cb8-88" title="88"><span class="kw">&lt;/html&gt;</span></a></code></pre></div>
<figure>
<img src="https://assets.aaonline.io/Module-DOM-API/event-handling/assets/drag-red-square-5.gif" alt="droppable red square with dashed border and active drop zone" /><figcaption>droppable red square with dashed border and active drop zone</figcaption>
</figure>
<h2 id="what-you-learned">What you learned:</h2>
<p>There is <em>a lot</em> going on, here. Here’s a quick review of what you should get from this article.</p>
<ul>
<li>HTML has a Drag and Drop API that you can use to do dragging and dropping in an application.</li>
<li>To make it so that a person can drag an HTML element around, you add the <code>draggable="true"</code> attribute/value pair to the element (or elements) that you want to drag.</li>
<li>You can subscribe to one event on the thing you want to drag, the <code>dragstart</code> event. That event will allow you to customize the element and save data to the <code>dataTransfer</code> object.</li>
<li>You can subscribe to four events for the “drop zone” element(s): <code>dragenter</code>, <code>dragover</code>, and <code>dragleave</code>. If you want the <code>drop</code> event to work, you <em>must</em> subscribe to both <code>dragenter</code> and <code>dragover</code> and cancel the event using the <code>preventDefault()</code> method of the event.</li>
</ul>
</body>
</html>
